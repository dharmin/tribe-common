!function(e,n,t){"use strict";var i=e(document),d=e(window);t.selectors={dependent:".tribe-dependent",active:".tribe-active",dependency:".tribe-dependency",dependencyVerified:".tribe-dependency-verified",fields:"input, select, textarea",advanced_fields:".select2-container",linked:".tribe-dependent-linked"},t.constraintConditions={condition:function(e,t){return n.isArray(t)?-1!==t.indexOf(e):e==t},not_condition:function(e,t){return n.isArray(t)?-1===t.indexOf(e):e!=t},is_not_empty:function(e){return""!=e},is_empty:function(e){return""===e},is_numeric:function(n){return e.isNumeric(n)},is_not_numeric:function(n){return!e.isNumeric(n)},is_checked:function(e,n,t){return!(!t.is(":checkbox")&&!t.is(":radio"))&&t.is(":checked")},is_not_checked:function(e,n,t){return!(!t.is(":checkbox")&&!t.is(":radio"))&&!t.is(":checked")}},t.verify=function(d){var c=e(this),o="#"+c.attr("id"),a=c.val();if(o){if(c.is(":radio")){var s=e("[name='"+c.attr("name")+"']");s.not(t.selectors.linked).on("change",function(){s.trigger("verify.dependency")}).addClass(t.selectors.linked.replace(".",""))}var r=i.find('[data-depends="'+o+'"]').not(".select2-container");0!==r.length&&(r.each(function(i,d){var o=e(d),s=o.is("[data-dependent-parent]");if(s){var r=o.data("dependentParent"),l=o.closest(r);if(0===l.length)return void console.warn("Dependency: `data-dependent-parent` has bad selector",o);o=l.find(d)}var p,f={condition:!!o.is("[data-condition]")&&o.data("condition"),not_condition:!!o.is("[data-condition-not]")&&o.data("conditionNot"),is_not_empty:o.data("conditionIsNotEmpty")||o.is("[data-condition-is-not-empty]")||o.data("conditionNotEmpty")||o.is("[data-condition-not-empty]"),is_empty:o.data("conditionIsEmpty")||o.is("[data-condition-is-empty]")||o.data("conditionEmpty")||o.is("[data-condition-empty]"),is_numeric:o.data("conditionIsNumeric")||o.is("[data-condition-is-numeric]")||o.data("conditionNumeric")||o.is("[data-condition-numeric]"),is_not_numeric:o.data("conditionIsNotNumeric")||o.is("[data-condition-is-not-numeric]"),is_checked:o.data("conditionIsChecked")||o.is("[data-condition-is-checked]")||o.data("conditionChecked")||o.is("[data-condition-checked]"),is_not_checked:o.data("conditionIsNotChecked")||o.is("[data-condition-is-not-checked]")||o.data("conditionNotChecked")||o.is("[data-condition-not-checked]")},u=t.selectors.active.replace(".",""),y=o.is("[data-dependency-check-disabled]"),h=o.is("[data-dependency-always-visible]"),m=!y&&c.is(":disabled"),v=o.data("condition-relation")||"or";f=n.pick(f,function(e){return!1!==e}),p="or"===v?n.reduce(f,function(e,n,i){return e||t.constraintConditions[i](a,n,c)},!1):n.reduce(f,function(e,n,i){return e&&t.constraintConditions[i](a,n,c)},!0),p&&!m?(o.data("select2")?(o.data("select2").container.addClass(u),o.data("select2").container.is(":hidden")&&o.data("select2").container.show()):(o.addClass(u),o.is(":hidden")&&o.show()),h&&o.filter(t.selectors.fields).prop("disabled",!1),o.find(t.selectors.fields).prop("disabled",!1),"undefined"!=typeof e().selectWoo&&o.find(".select2-container").selectWoo("enable",!0)):(o.removeClass(u),o.is(":visible")&&o.hide(),o.data("dependency-dont-disable")||o.find(t.selectors.fields).prop("disabled",!0),"undefined"!=typeof e().selectWoo&&o.find(".select2-container").selectWoo("enable",!1),o.data("select2")&&o.data("select2").container.removeClass(u),h&&(o.addClass(u).show(),o.filter(t.selectors.fields).prop("disabled",!0),o.data("select2")&&o.data("select2").container.addClass(u).show()));var k=o.find(t.selectors.dependency);k.length>0&&k.trigger("change")}),c.addClass(t.selectors.dependencyVerified.className()))}},t.setup=function(n){var i=e(t.selectors.dependent);i.length&&i.dependency();var d=e(t.selectors.dependency);d.not(t.selectors.dependencyVerified).length&&d.trigger("verify.dependency")},e.fn.dependency=function(){return this.each(function(){var n=e(this),i=n.data("depends"),d=e(i);d.length&&(d.get(0).created||(d.addClass(t.selectors.dependency.replace(".","")).data("dependent",n),d.get(0).created=!0))})},i.on("setup.dependency",t.setup),i.off("change.dependency verify.dependency",t.selectors.dependency),i.on({"verify.dependency":t.verify,"change.dependency":t.verify},t.selectors.dependency),i.ready(t.setup),d.on("load",t.setup)}(jQuery,window.underscore||window._,{});